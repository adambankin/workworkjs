<!DOCTYPE html>
<html>
<head>
	<title>Demo | Primes</title>
	<link rel="stylesheet" type="text/css" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/prism.css">
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	
</head>

<body>
	<a href="https://github.com/you"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>


	<div class="container">
		<h1>WorkWork Demo</h1>
		<h3>1. Finding the nthPrime</h3>
		<hr>

		<div class="row">
			<div class="col-lg-6 col-md-12">
				<h4>Array.prototype.map</h4>
				<pre class="language-javascript line-numbers" date-start="11"><code>arr.map(function(elem, i) {
	return nthPrime(elem);
});

//returns a new array with nth prime numbers as elements</code></pre>
			</div>

			<div class="col-lg-6 col-md-12">
				<h4>WorkWork.map</h4>
				<pre class="language-javascript line-numbers" date-start="11"><code>WorkWork.map(function(elem, i) {
	return nthPrime(elem);
})
.then(function(resultArr) {
	console.log(resultArr);
})

//logs a new array with nth prime numbers as elements</code></pre>

			</div>
		</div>

		<div class="row">
			<div class="col-lg-12 col-md-12">
				<div class="array">
					<span class="left_bracket">[</span>
					<span class="arr_elem" id="1_0"></span>
					<span class="arr_elem" id="1_1"></span>
					<span class="arr_elem" id="1_2"></span>
					<span class="arr_elem" id="1_3"></span>
					<span id="2_4"></span>
					<span class="right_bracket">]</span>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-3 col-md-6">
				<div class="peon">
					<img src="peon.gif">
				</div>
			</div>
			<div class="col-lg-3 col-md-6">
				<div class="dash">
					<button class="btn btn-primary-outline btn-block">Reset</button>
					<button class="btn btn-primary-outline btn-block">Native</button>
					<button class="btn btn-primary-outline btn-block">Work Work</button>
				</div>
			</div>
		</div>
	</div>






<script src="js/workwork.js"></script>
<script src="js/parallel.js"></script>
<script src="js/prism.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

<script>
var testNum = 200000;

	// for (var i = 0; i < 10; i++) {
	// 	$('div.top').append('<span id=' + 1 + '_' + i + '>' + testNum + '</span>');
	// 	$('div.bottom').append('<span id=' + 2 + '_' + i + '>' + testNum + '</span');
	// }

function nthPrime (n) {
	function isPrime (num) {
		var current = 2;
		while (current < num) {
			if (num < 2) {
				return false;
			}
			if (current > Math.sqrt(num)) {
				return true;
			}
			if (num % current === 0) {
				return false;
			}
			current += 1;
		}
		return true;
	}
	var primes = [2,3,5];
	var current = 5;

	while (primes.length < n) {
		current += 2;
		if (isPrime(current)) primes.push(current);

		if (primes.length === n) break;
		current += 4;
		if (isPrime(current)) primes.push(current);
	}

	return primes[n - 1];
}

var arr = [];
var totalTimeLinear = 0;

for (var i = 0; i < 5; i++) {
	arr.push(testNum + i);
}

var start = new Date();

// arr.map(function(num, i) {
// 	var result = nthPrime(num);
// 	console.log("primes(", num, ")=", result);	
// 	document.getElementById('1_' + i).innerHTML = result;
// 	return result;
// });

console.log("Total Time Linear:", new Date() - start);


// WorkWork.forEach(arr, nthPrime);
WorkWork.map(arr, nthPrime)
.then(resultArr => {
	console.log("Result Arr",resultArr);
})

setTimeout (function () {
	var start = new Date();
	var p = new Parallel(arr);
	p.map(nthPrime).then(result => {
		console.log("Parallel.js time:", new Date() - start);
	});
}, 5000)

</script>
</body>
</html>